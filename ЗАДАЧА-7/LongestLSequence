import java.io.*;
import java.nio.file.*;

/**
 * –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–º–≤–æ–ª–æ–≤ 'L'
 * –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ, —Å–æ—Å—Ç–æ—è—â–µ–º –∏–∑ —Å–∏–º–≤–æ–ª–æ–≤ L, D –∏ R.
 *
 * –ó–∞–¥–∞—á–∞: –¢–∏–ø 24 ‚Ññ 27696
 * –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ—Å—Ç–æ–∏—Ç –Ω–µ –±–æ–ª–µ–µ —á–µ–º –∏–∑ 10^6 —Å–∏–º–≤–æ–ª–æ–≤ L, D –∏ R.
 * –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –¥–ª–∏–Ω—É —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Å–æ—Å—Ç–æ—è—â–µ–π –∏–∑ —Å–∏–º–≤–æ–ª–æ–≤ L.
 * –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª L –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
 */
public class LongestLSequence {

    public static void main(String[] args) {
        // –ü—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É
        String inputFilePath = "input.txt";
        // –ü—É—Ç—å –¥–ª—è —Å–∏–º–≤–æ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
        String symlinkPath = "data_link.txt";

        try {
            System.out.println("=== –ü–æ–∏—Å–∫ —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–º–≤–æ–ª–æ–≤ 'L' ===\n");

            // –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
            File inputFile = new File(inputFilePath);
            if (!inputFile.exists()) {
                System.out.println("‚ùå –§–∞–π–ª '" + inputFilePath + "' –Ω–µ –Ω–∞–π–¥–µ–Ω!");
                System.out.println("–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª 'input.txt' —Å —Å–∏–º–≤–æ–ª–∞–º–∏ L, D, R –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞.");
                System.out.println("–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ: LLLDRLLLRDDLLL");
                return;
            }

            System.out.println("üìÅ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–∞–π–ª: " + inputFile.getAbsolutePath());
            System.out.println("–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: " + inputFile.length() + " –±–∞–π—Ç\n");

            // –®–ê–ì 2: –°–æ–∑–¥–∞–µ–º —Å–∏–º–≤–æ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
            createSymbolicLink(inputFilePath, symlinkPath);

            // –®–ê–ì 3: –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∏ –Ω–∞—Ö–æ–¥–∏–º —Å–∞–º—É—é –¥–ª–∏–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å 'L'
            int maxLength = findLongestLSequence(inputFilePath);

            // –®–ê–ì 4: –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            System.out.println("=".repeat(50));
            System.out.println("‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢:");
            System.out.println("–î–ª–∏–Ω–∞ —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–º–≤–æ–ª–æ–≤ 'L': " + maxLength);
            System.out.println("=".repeat(50));

            // –®–ê–ì 5: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            if (maxLength == 0) {
                System.out.println("\n‚ö†Ô∏è  –í–Ω–∏–º–∞–Ω–∏–µ: –í —Ñ–∞–π–ª–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ 'L'!");
                System.out.println("   –•–æ—Ç—è –ø–æ —É—Å–ª–æ–≤–∏—é –∑–∞–¥–∞—á–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª L.");
            }

        } catch (IOException e) {
            System.err.println("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞: " + e.getMessage());
            e.printStackTrace();
        } catch (Exception e) {
            System.err.println("‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: " + e.getMessage());
        }
    }

    /**
     * –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–º–≤–æ–ª–æ–≤ 'L'
     * @param filePath –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
     * @return –¥–ª–∏–Ω–∞ —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 'L'
     */
    private static int findLongestLSequence(String filePath) throws IOException {
        int maxLength = 0;    // –°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
        int currentLength = 0; // –¢–µ–∫—É—â–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

        System.out.println("üîç –ù–∞—á–∏–Ω–∞–µ–º –∞–Ω–∞–ª–∏–∑ —Å–∏–º–≤–æ–ª–æ–≤...");

        // –ò—Å–ø–æ–ª—å–∑—É–µ–º BufferedReader –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
        try (BufferedReader reader = new BufferedReader(new FileReader(filePath))) {
            int character;
            long totalChars = 0;

            while ((character = reader.read()) != -1) {
                totalChars++;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª—ã L (ASCII –∫–æ–¥ 76)
                if (character == 'L') {
                    currentLength++;
                    if (currentLength > maxLength) {
                        maxLength = currentLength;
                    }
                } else {
                    currentLength = 0; // –°–±—Ä–æ—Å –ø—Ä–∏ –ª—é–±–æ–º –¥—Ä—É–≥–æ–º —Å–∏–º–≤–æ–ª–µ
                }

                // –ü—Ä–æ–≥—Ä–µ—Å—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
                if (totalChars % 100000 == 0) {
                    System.out.printf("   –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: %,d —Å–∏–º–≤–æ–ª–æ–≤\n", totalChars);
                }
            }

            System.out.printf("\nüìä –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–∏–º–≤–æ–ª–æ–≤: %,d\n", totalChars);
            System.out.printf("   –°–∏–º–≤–æ–ª–æ–≤ 'L' –Ω–∞–π–¥–µ–Ω–æ –≤ —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π —Ü–µ–ø–æ—á–∫–µ: %d\n", maxLength);
        }

        return maxLength;
    }

    /**
     * –ú–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏–º–≤–æ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ (—Å–∏–º–ª–∏–Ω–∫–∞)
     * @param targetPath –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
     * @param linkPath –ø—É—Ç—å –¥–ª—è —Å–∏–º–≤–æ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
     */
    private static void createSymbolicLink(String targetPath, String linkPath) {
        try {
            Path target = Paths.get(targetPath);
            Path link = Paths.get(linkPath);

            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é —Å—Å—ã–ª–∫—É –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            Files.deleteIfExists(link);

            // –°–æ–∑–¥–∞–µ–º —Å–∏–º–≤–æ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
            Files.createSymbolicLink(link, target);

            System.out.println("üîó –°–æ–∑–¥–∞–Ω–∞ —Å–∏–º–≤–æ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:");
            System.out.println("   –°—Å—ã–ª–∫–∞: " + linkPath + " ‚Üí –û—Ä–∏–≥–∏–Ω–∞–ª: " + targetPath);
            System.out.println("   –°—Å—ã–ª–∫–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞: " + Files.readSymbolicLink(link));

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
            if (Files.exists(link)) {
                System.out.println("   ‚úì –°—Å—ã–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞\n");
            }

        } catch (UnsupportedOperationException e) {
            System.out.println("‚ö†Ô∏è  –°–∏–º–≤–æ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ");
            System.out.println("   (–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è Windows –±–µ–∑ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)\n");
        } catch (IOException e) {
            System.out.println("‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–≤–æ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É: " + e.getMessage());
            System.out.println("   –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º...\n");
        }
    }

    /**
     * –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç FileInputStream)
     * –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
     */
    private static int findLongestLSequenceAlternative(String filePath) throws IOException {
        int maxLength = 0;
        int currentLength = 0;

        System.out.println("\nüîç –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –∞–Ω–∞–ª–∏–∑–∞...");

        try (FileInputStream fis = new FileInputStream(filePath)) {
            byte[] buffer = new byte[8192]; // 8KB –±—É—Ñ–µ—Ä
            int bytesRead;

            while ((bytesRead = fis.read(buffer)) != -1) {
                for (int i = 0; i < bytesRead; i++) {
                    if (buffer[i] == 'L') {
                        currentLength++;
                        if (currentLength > maxLength) {
                            maxLength = currentLength;
                        }
                    } else {
                        currentLength = 0;
                    }
                }
            }
        }

        return maxLength;
    }
}
